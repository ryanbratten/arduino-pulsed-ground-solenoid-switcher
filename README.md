# Arduino Stepper

## Explanation:


## Power Supply:

The positive terminal of the 12V power supply is connected to the positive terminals of both solenoids.
The negative terminal of the 12V power supply is connected to the ground.

## Solenoids:
Solenoid1 and Solenoid2 are connected in parallel, each with a flyback diode (D1 and D2) across them to protect against voltage spikes.
The negative terminal of each solenoid is connected to the drain of its respective MOSFET (MOSFET1 and MOSFET2).
MOSFETs:

The source of each MOSFET is connected to the ground.
The gate of each MOSFET is connected to an Arduino output pin through a 10k ohm resistor (R1 and R2).
Arduino:

The input signal is connected to Arduino digital pin 2 and is pulsed ground.
Arduino digital pins 3 and 4 control the gates of MOSFET1 and MOSFET2 respectively.
SW1 represents the input signal, which is a pulsed ground connection

### Pins Setup:
inputPin is set to pin 0.
outputPinA and outputPinB are set to pins 3 and 4 respectively.

### Interval Calculation:
The interval for switching solenoids is calculated as 1000 / 60, which gives approximately 16.67 milliseconds (60 Hz frequency).

### State Management:
A boolean solenoidState keeps track of which solenoid is currently active.

### Loop Function:
The loop function reads the state of the input pin.
If the input is HIGH, it checks if the interval has passed using millis() and switches the solenoids accordingly.
If the input is LOW, both solenoids are turned off.

## Hardware Components

1. **Arduino Board**:
   - An Arduino Uno or any other compatible Arduino board.

2. **Solenoids**:
   - Two 12V solenoids (or solenoids rated for your specific power supply).

3. **Power Supply**:
   - A 12V power supply to drive the solenoids. Ensure the power supply can provide sufficient current for both solenoids.

4. **Transistors/MOSFETs**:
   - Two N-channel MOSFETs (e.g., IRF540) or NPN transistors (e.g., TIP120) to switch the solenoids, as the Arduino cannot directly drive high-current loads.

5. **Diodes**:
   - Two flyback diodes (e.g., 1N4007) to protect the transistors/MOSFETs from the inductive kickback generated by the solenoids.

6. **Resistors**:
   - Two 10k ohm resistors for the transistor/MOSFET gates/bases.

7. **Input Device**:
   - A button, switch, or sensor to provide the input signal to the Arduino.

8. **Breadboard and Jumper Wires**:
   - For prototyping and connecting the components.

9. **Optional Components**:
   - A relay module if you prefer to use relays instead of transistors/MOSFETs for switching.

## Circuit Diagram

1. **Solenoids**:
   - Connect the negative terminals of the solenoids to the drain of the MOSFETs (or the collector of the transistors).
   - Connect the positive terminals of the solenoids to the 12V power supply.

2. **MOSFETs/Transistors**:
   - Connect the source of each MOSFET to ground (or the emitter of the transistors to ground).
   - Connect the gates of the MOSFETs (or the bases of the transistors) to the Arduino output pins (through 10k ohm resistors).

3. **Diodes**:
   - Place a flyback diode across each solenoid, with the cathode to the positive terminal and the anode to the drain/collector.

4. **Input Device**:
   - Connect one terminal of the input device to the 5V pin on the Arduino and the other terminal to the input pin (with a pull-down resistor if needed).

## Circuit Schematic

```
+12V
 |
 +------+
 |      |
 |     (|)
 |   Solenoid1
 |     (|)
 |      |
 |      +----|>|----+
 |      |    D1     |
 |      |           |
 |      |           |
 |      |          (|)
 |      |       MOSFET1
 |      |        (IRF540)
 |      |           |
 |      |           |
 |      |           |
 |      |           |
 |      |           |
 |      |          GND
 |      |
 |      +------+
 |             |
 |            (|)
 |         Solenoid2
 |            (|)
 |             |
 |             +----|>|----+
 |             |    D2     |
 |             |           |
 |             |           |
 |             |          (|)
 |             |       MOSFET2
 |             |        (IRF540)
 |             |           |
 |             |           |
 |             |           |
 |             |           |
 |             |           |
 |             |          GND
 |
 GND

Arduino
+----------------+
|                |
|  +----+        |
|  |    |        |
|  | 2  |----+
|  |    |    |
|  |    |   (|)
|  |    |   SW1
|  |    |   (|)
|  |    |    |
|  |    |   GND
|  |    |
|  | 3  |--------|-------+
|  |    |       R1       |
|  |    |       |        |
|  |    |       +--/\/\--+
|  |    |       |   10k  |
|  |    |       |        |
|  | 4  |-------|--------+
|  |    |       R2       |
|  |    |       |        |
|  |    |       +--/\/\--+
|  |    |       |   10k  |
|  |    |       |        |
|  +----+       |        |
|               |        |
|               |        |
|              G1       G2
|           MOSFET1   MOSFET2
|           (Gate)    (Gate)
+----------------+

Notes:
- G1 and G2 are the gates of MOSFET1 and MOSFET2 respectively.
- D1 and D2 are flyback diodes (1N4007).
- R1 and R2 are 10k ohm resistors.
- SW1 represents the input signal, a pulsed ground.
```

## Component Descriptions:

1. **R1 and R2**: 10k ohm resistors
2. **MOSFET1 and MOSFET2**: N-channel MOSFETs (e.g., IRF540)
3. **D1 and D2**: Flyback diodes (e.g., 1N4007)

## Steps to Build:

1. **Connect the Solenoids**:
   - Connect each solenoidâ€™s positive terminal to the 12V power supply.
   - Connect the negative terminal to the drain of its respective MOSFET.

2. **Connect the MOSFETs**:
   - Connect the source of each MOSFET to the ground.
   - Connect the gate of each MOSFET to the respective Arduino pin (through a 10k ohm resistor).

3. **Connect the Diodes**:
   - Connect a diode across each solenoid with the cathode to the positive terminal and the anode to the drain of the MOSFET.

4. **Connect the Input Device**:
   - Connect the input device to the input pin on the Arduino and to 5V (add a pull-down resistor if necessary).